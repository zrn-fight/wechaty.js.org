<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Wechaty Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Wechaty Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Wechaty" href="/opensearch.xml">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-PD2PL84",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
<link rel="icon" href="/img/icon.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(8, 168, 56)">
<link rel="stylesheet" href="/css/gitter-sidecar.css">
<script src="/js/gitter-sidecar.js"></script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async></script><title data-react-helmet="true">Puppet Provider: PadLocal | Wechaty</title><meta data-react-helmet="true" property="og:image" content="https://wechaty.js.org/img/wechaty-logo.svg"><meta data-react-helmet="true" property="og:url" content="https://wechaty.js.org/docs/puppet-providers/padlocal"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="twitter:image" content="img/wechaty-icon.png"><meta data-react-helmet="true" name="twitter:title" content="Wechaty"><meta data-react-helmet="true" name="twitter:description" content="Wechaty Official Website for News, Blogs, Contributor Profiles, and Documentations."><meta data-react-helmet="true" property="og:title" content="Puppet Provider: PadLocal | Wechaty"><meta data-react-helmet="true" name="description" content="Wechaty Puppet PadLocal"><meta data-react-helmet="true" property="og:description" content="Wechaty Puppet PadLocal"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wechaty.js.org/docs/puppet-providers/padlocal"><link data-react-helmet="true" rel="alternate" href="https://wechaty.js.org/docs/puppet-providers/padlocal" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wechaty.js.org/docs/puppet-providers/padlocal" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.020f8834.css">
<link rel="preload" href="/assets/js/runtime~main.88781fee.js" as="script">
<link rel="preload" href="/assets/js/main.eecbffd6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PD2PL84" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/wechaty-logo.svg" alt="Wechaty Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/wechaty-logo.svg" alt="Wechaty Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title"></b></a></div><div class="navbar__items navbar__items--right"><a href="https://wechaty.js.org/news/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link"><span>News<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://wechaty.js.org/blog/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://wechaty.js.org/contributors/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Contributors<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/docs/">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/wechaty">Introduction</a></li><li><a class="dropdown__link" href="/docs/tutorials/">Tutorials</a></li><li><a class="dropdown__link" href="/docs/howto/">How-to Guides</a></li><li><a class="dropdown__link" href="/docs/references/">References</a></li><li><a class="dropdown__link" href="/docs/explanations/">Explanations</a></li></ul></div><a href="https://github.com/wechaty/wechaty#readme" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0 sidebarWithHideableNavbar_VlPv"><a tabindex="-1" class="sidebarLogo_hmkv" href="/"><img src="/img/wechaty-logo.svg" alt="Wechaty Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/wechaty-logo.svg" alt="Wechaty Logo" class="themedImage_TMUO themedImage--dark_uzRr"><b></b></a><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">How-to Guides</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">References</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/references/">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Polyglot</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Puppet Providers</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/">Puppet Providers: Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/wechat">WeChat</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/whatsapp">WhatsApp</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/official-account">Official Account</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/gitter">Gitter</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/lark">Lark</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/puppet-providers/padlocal">PadLocal</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/wechat4u">WeChat4U</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/xp">XP</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/service">Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/mock">Mock</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/puppet-providers/diy">Puppet Provider: DIY</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Puppet Services</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Specifications</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/references/breaking-changes">Breaking Changes</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Explanations</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Puppet Provider: PadLocal</h1></header><p><a href="/docs/puppet-providers/padlocal"><img src="https://img.shields.io/badge/Puppet-PadLocal-blueviolet" alt="Wechaty Puppet PadLocal"></a></p><p><img src="https://wechaty.js.org/assets/2020/padlocal/logo.png" alt="Wechaty Puppet PadLocal"></p><p><a href="https://badge.fury.io/js/wechaty-puppet-padlocal" target="_blank" rel="noopener noreferrer"><img src="https://badge.fury.io/js/wechaty-puppet-padlocal.svg" alt="NPM Version"></a>
<a href="https://www.npmjs.com/package/wechaty-puppet-padlocal?activeTab=versions" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/wechaty-puppet-padlocal/next.svg" alt="npm (tag)"></a>
<a href="https://github.com/padlocal/padlocal-client-ts" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/Powered%20By-padlocal--client--ts-brightgreen" alt="Powered by padlocal-client-ts"></a></p><ul><li>Repo: <a href="https://github.com/padlocal/wechaty-puppet-padlocal" target="_blank" rel="noopener noreferrer">https://github.com/padlocal/wechaty-puppet-padlocal</a></li><li>Support &amp; Feedback: <a href="https://github.com/padlocal/wechaty-puppet-padlocal/issues" target="_blank" rel="noopener noreferrer">https://github.com/padlocal/wechaty-puppet-padlocal/issues</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="features"></a>Features<a class="hash-link" href="#features" title="Direct link to heading">#</a></h2><p>PadLocal is a full-featured Wechaty Puppet Provider.</p><table><thead><tr><th>Function</th><th>功能</th><th>padlocal</th></tr></thead><tbody><tr><td><strong>Message</strong></td><td><strong>&lt;消息&gt;</strong></td><td></td></tr><tr><td>Send and receive text</td><td>收发文本</td><td>✅</td></tr><tr><td>Send and receive personal business cards</td><td>收发个人名片</td><td>✅</td></tr><tr><td>Send and receive graphic links</td><td>收发图文链接</td><td>✅</td></tr><tr><td>Send pictures and files</td><td>发送图片、文件</td><td>✅</td></tr><tr><td>Receive pictures and files</td><td>接收图片、文件</td><td>✅</td></tr><tr><td>Send video</td><td>发送视频</td><td>✅</td></tr><tr><td>Receive video</td><td>接收视频</td><td>✅</td></tr><tr><td>Send Mini Program</td><td>发送小程序</td><td>✅</td></tr><tr><td>Receive GIF</td><td>接收动图</td><td>✅</td></tr><tr><td>Send GIF</td><td>发送动图</td><td>✅</td></tr><tr><td>Receive voice message</td><td>接收语音消息</td><td>✅</td></tr><tr><td>Send voice message</td><td>发送语音消息</td><td>✅</td></tr><tr><td>Forward text</td><td>转发文本</td><td>✅</td></tr><tr><td>Forward the picture</td><td>转发图片</td><td>✅</td></tr><tr><td>Forward graphic link</td><td>转发图文链接</td><td>✅</td></tr><tr><td>Forward audio</td><td>转发音频</td><td>✅</td></tr><tr><td>Forward the video</td><td>转发视频</td><td>✅</td></tr><tr><td>Forward file</td><td>转发文件</td><td>✅</td></tr><tr><td>Forward GIF</td><td>转发动图</td><td>❌</td></tr><tr><td>Forwarding applet</td><td>转发小程序</td><td>✅</td></tr><tr><td><strong>Group</strong></td><td><strong>&lt;群组&gt;</strong></td><td></td></tr><tr><td>Create group chat</td><td>创建群聊</td><td>✅</td></tr><tr><td>Set group announcement</td><td>设置群公告</td><td>✅</td></tr><tr><td>Get group announcement</td><td>获取群公告</td><td>✅</td></tr><tr><td>Group QR Code</td><td>群二维码</td><td>✅</td></tr><tr><td>Pull people into the group</td><td>拉人进群</td><td>✅</td></tr><tr><td>Kick out of the group</td><td>踢人出群</td><td>✅</td></tr><tr><td>Exit group chat</td><td>退出群聊</td><td>✅</td></tr><tr><td>Change group name</td><td>改群名称</td><td>✅</td></tr><tr><td>Group entry event</td><td>入群事件</td><td>✅</td></tr><tr><td>Outliers</td><td>离群事件</td><td>✅</td></tr><tr><td>Group name change event</td><td>群名称变更事件</td><td>✅</td></tr><tr><td>@群员</td><td></td><td>✅</td></tr><tr><td>Group list</td><td>群列表</td><td>✅</td></tr><tr><td>Group member list</td><td>群成员列表</td><td>✅</td></tr><tr><td>Group details</td><td>群详情</td><td>✅</td></tr><tr><td><strong>Contact</strong></td><td><strong>&lt;联系人&gt;</strong></td><td></td></tr><tr><td>Modification notes</td><td>修改备注</td><td>✅</td></tr><tr><td>Add friends</td><td>添加好友</td><td>✅</td></tr><tr><td>Pass friends automatically</td><td>自动通过好友</td><td>✅</td></tr><tr><td>Add friends</td><td>添加好友</td><td>✅</td></tr><tr><td>Friends list</td><td>好友列表</td><td>✅</td></tr><tr><td>Friends details</td><td>好友详情</td><td>✅</td></tr><tr><td><strong>Other</strong></td><td><strong>&lt;其他&gt;</strong></td><td></td></tr><tr><td>Log in to WeChat</td><td>登录微信</td><td>✅</td></tr><tr><td>Scan code status</td><td>扫码状态</td><td>✅</td></tr><tr><td>Exit WeChat</td><td>退出微信</td><td>✅</td></tr><tr><td>Dependency Agreement</td><td>依赖协议</td><td>iPad</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="usage"></a>Usage<a class="hash-link" href="#usage" title="Direct link to heading">#</a></h2><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>TOKEN required</h5></div><div class="admonition-content"><p>PadLocal is a Wechaty Puppet Provider which consumes Wechaty Puppet Service.</p><p>Learn about <a href="/docs/puppet-services/padlocal">how to get a PadLocal TOKEN</a></p></div></div><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_vU9c tabs__item--active">Linux</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_vU9c">macOS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_vU9c">Windows</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">npm install wechaty-puppet-padlocal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export WECHATY_PUPPET=wechaty-puppet-padlocal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export WECHATY_PUPPET_PADLOCAL_TOKEN=${TOKEN}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">npm start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">npm install wechaty-puppet-padlocal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export WECHATY_PUPPET=wechaty-puppet-padlocal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export WECHATY_PUPPET_PADLOCAL_TOKEN=${TOKEN}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">npm start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">npm install wechaty-puppet-padlocal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">set WECHATY_PUPPET=wechaty-puppet-padlocal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">set WECHATY_PUPPET_PADLOCAL_TOKEN=${TOKEN}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">npm start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="history"></a>History<a class="hash-link" href="#history" title="Direct link to heading">#</a></h2><p>In 2019 to 2020, the padlocal development team started making community-related products, and also started using Wechaty. Gradually their recognition and trust with Wechaty and the entire community was built up.</p><p>When the developer of Padlocal was working on a crawler system a few years ago, he came into contact with Wechaty. This project needed to regularly push the status information of the crawler and actively query related content crawled. At that time, there was a very popular saying: &quot;Dialogue is a service&quot;, so he wondered whether these functions can be realized through WeChat? With the help of Wechaty, all functions were quickly realized, and the final effect was also very good.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="padlocal-wechaty-puppet-service-provider"></a>PadLocal: Wechaty puppet service provider<a class="hash-link" href="#padlocal-wechaty-puppet-service-provider" title="Direct link to heading">#</a></h3><p>The puppet in the community was not perfect at that time. There were some gaps in the process of using it. Moreover, the life cycle of puppet is not particularly stable, and it may not be maintained after a period of time. They were worried that this uncertainty would affect their business, so they had the idea of ​​developing a puppet themselves.</p><p>So unpacking from the App, using IDA to decompile WeChat, started a long reverse road. Before doing this, the team expected this process to be difficult and encounter all kinds of difficult roadblocks, but never expected it to be so difficult. The initial stage was quite pleasant, because we could easily see our growth every step of the way, and every time we fought a monster, we felt that we had risen to a level. But on going deeper, a lot of really hard roadblocks turned up. They even considered ​​giving up, but they were not reconciled, and persevered. Here are a few moments of those hardships:</p><ul><li><p><strong>Handling code obfuscation</strong> : WeChat will obfuscate sensitive code. For code obfuscation, it is recommended that to refer to ollvm. Code obfuscation may have these several methods:</p><ol><li>Control flow flattening</li><li>Fake control flow</li><li>Instruction replacement.</li></ol><p>Quarkslab&#x27;s article &quot;Deobfuscation: recovering an OLLVM-protected program&quot; also introduces a little deobfuscation method, but the examples mentioned in the article are only insignificant compared to those encountered in WeChat. For example, a certain function of WeChat has more than 7W lines after obfuscation, and it can take a whole day to decompile with IDA. By slowly disclosing these codes every day, many rules have been summarized. So a small tool was written to solve the obfuscation, and through continuous attempts and corrections, the code was finally unobfuscated.</p></li><li><p><strong>0305 algorithm</strong> : WeChat itself performs strict verification on the client, including information such as device environment and device fingerprints. That is to say, using some tools mentioned on the Internet to modify the function of WeChat, it is actually easy to be recognized by WeChat, and it may be a matter of time before the account is blocked. Some encryption and decryption and signature verification mechanisms are needed here, and the 0305 algorithm is one of the more difficult ones. First of all, the code itself has been obfuscated, and secondly, even if it is unobfuscated, it is difficult to see its logic, such as the specific algorithm used, encryption, decryption, and signature verification process. So it can only be explored slowly, the changes in the data have to be constantly observed at each step, and possible patterns had to be explored. In the end, after a lot of attempts, the correct algorithm and process were hit.</p></li></ul><p>After experiencing several difficulties and successfully solving them, the team had a lot of confidence. Even after encountering moments of frustration, the team believed that the challenge could be completed. The journey was one step at a time.</p><p>In the end, fully implemented puppet called PadLocal was developed. There were a few reasons why the name was decided to be &quot;PadLocal&quot;. The next section will explain the overall design of the puppet and how it differs from other puppets. The biggest features of PadLocal are:</p><ul><li>Managing account status</li><li>Communication with WeChatServer</li></ul><p>When designing puppet, firstly investigated other puppets in the community were investigated and their implementation principles were studied in great detail. It was observed that most other puppet design ideas were like this: the puppet server manages and maintains the status of the hosting account. All requests are completed through the link puppet -&gt; puppet server -&gt; WeChatServer. In the message push part, a long connection is established between puppet and puppet server, and a corresponding long connection is also established between puppet server and WeChatServer. When a new message is pushed, it reaches the puppet end through the link WeChatServer -&gt; puppet server -&gt; puppet. In this design, the puppet server acts as a stateful proxy, and all traffic is forwarded by the server. In our opinion, such a design may have several potential disadvantages:</p><ol><li>Because the puppet server ultimately communicates with WeChatServer, if multiple accounts are hosted on a puppet server, and no proxy policy is configured for each account, then these accounts will share the IP of the puppet server. From the perspective of risk control, risks are prone to arise. Moreover, once some of the accounts have a relatively high risk level, it is easy to pollute other accounts in the same IP pool and harm the innocent.</li><li>All traffic is forwarded through the puppet server, which puts a lot of pressure on its bandwidth, especially when a large number of multimedia resources such as pictures and videos are generated in the hosting account.</li><li>Since the puppet server maintains the status of the hosting account, the puppet server is stateful. From the perspective of system architecture, stateful servers have considerable challenges in terms of system stability, availability, and capacity planning. If some servers in the cluster are down, and the design of the standby switch mechanism is not perfect, some accounts are likely to be in an unavailable state.</li><li>In order to ensure better usability and experience of puppet, the puppet server usually caches (not necessarily permanently saves) certain data (such as chat data). In other words, the server inevitably needs to touch the business data of the hosting account. This requires puppet providers to maintain extremely high industry self-discipline and ensure the security of customer data through adequate mechanisms.</li></ol><p>Based on the above considerations, all traffic forwarding work was put into the puppet, which is the source of Local in PadLocal. Two-way communication mechanism of GRPC was used to make puppet a proxy and forward all traffic to WeChatServer through puppet. At the same time, puppet maintains a long connection with WeChatServer. The benefits of this are as follows:</p><ol><li>The IP used for the communication between the hosting account and WeChatServer is the IP of the puppet end, and there is no risk of sharing the IP for different accounts.</li><li>The flow of downloading multimedia resources such as pictures and videos does not need to go through the PadLocal server. And without going through the server, the efficiency is higher.</li><li>The account status maintenance is done on the puppet side, so the PadLocal server can be designed as stateless. It will naturally be much simpler to deal with issues such as expansion, simple is beautiful.
PadLocal server will not save any business data, and there is no risk of data security.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="topology"></a>Topology<a class="hash-link" href="#topology" title="Direct link to heading">#</a></h3><p>The topology diagram of the overall architecture is as follows:</p><p><img alt="Topology diagram" src="/assets/images/padlocal-topological-graph-6cc38db7c6aae0bfd700e4ca396186de.webp"></p><p>By implementing a puppet, the team gained a lot of things ourselves. They now have a more in-depth understanding of Wechaty, and can understand the original intention of the designer and the trade-offs among them. The fact that Wechaty is so easy to use is the result of careful design. Secondly, creating a Wechaty puppet is a very challenging thing, ofcourse it is full of accomplishment to be able to complete such a thing. Furthermore, from an internal perspective, a more in-depth and comprehensive understanding of the WeChat terminal Operating mechanism and design ideas can be had. As a national-level communication software, WeChat&#x27;s design is excellent. Various mechanisms and design concepts can fully serve as industry standards. It is worthy of being the absolute king in this field.</p><p>The development team released the PadLocal puppet to the outside world, hoping to help everyone realize various ideas in the WeChat ecosystem, and at the same time help the WeChat ecosystem to develop more abundantly and healthily. For future plans, they will continue to actively maintain this puppet with the iteration of the WeChat version.</p><p>PadLocal is currently in the beta testing stage, and there are still some minor issues that need to be resolved. More developers are expected to participate and let this puppet move to the next more mature stage. There is a  reward mechanism in place to thank the partners who have contributed to PadLocal, and the specific rules are still being negotiated. At present, Token is gradually opened to everyone in the form of &quot;application + review&quot;. If you are interested, please contact the administrator classmates and explain what kind of creativity you achieve through PadLocal. We are also preparing more detailed documents and guidelines, so stay tuned.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="maintainers"></a>Maintainers<a class="hash-link" href="#maintainers" title="Direct link to heading">#</a></h2><ul><li><a href="https://wechaty.js.org/contributors/padlocal" target="_blank" rel="noopener noreferrer">@padlocal</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="blogs"></a>Blogs<a class="hash-link" href="#blogs" title="Direct link to heading">#</a></h2><ul><li><a href="https://wechaty.js.org/2020/10/12/puppet-padlocal-intro/" target="_blank" rel="noopener noreferrer">New Wechaty Puppet Service: PadLocal, Padlocal, Oct 12, 2020</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wechaty/wechaty.js.org/edit/main/docusaurus/docs/puppet-providers/padlocal.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated on <b><time datetime="2021-09-08T04:49:17.000Z">9/8/2021</time></b> by <b>Shraddha</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/puppet-providers/lark"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Lark</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/puppet-providers/wechat4u"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">WeChat4U »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#features" class="table-of-contents__link">Features</a></li><li><a href="#usage" class="table-of-contents__link">Usage</a></li><li><a href="#history" class="table-of-contents__link">History</a><ul><li><a href="#padlocal-wechaty-puppet-service-provider" class="table-of-contents__link">PadLocal: Wechaty puppet service provider</a></li><li><a href="#topology" class="table-of-contents__link">Topology</a></li></ul></li><li><a href="#maintainers" class="table-of-contents__link">Maintainers</a></li><li><a href="#blogs" class="table-of-contents__link">Blogs</a></li></ul></div></div></div></div></main></div></div><main id="body"><footer id="footer"><div id="footerUpper"><div id="footerFirstColumn"><p id="footerColumnEmphasis"> Docs </p><p id="footerColumnOne"><a href="docs/wechaty"> Introduction </a><br><a href="docs/tutorials/"> Tutorials </a><br><a href="docs/howto/"> How-to Guides </a><br><a href="docs/references/"> References </a><br><a href="docs/explanations/"> Explanations </a><br></p></div><div id="footerSecondColumn"><p id="footerColumnEmphasis"> Community </p><p id="footerColumnTwo"><a href="https://gitter.im/wechaty/wechaty"> Gitter </a><br><a href="https://github.com/wechaty/wechaty/discussions"> Discussion </a><br><a href="https://stackoverflow.com/questions/tagged/wechaty"> Stack Overflow </a><br><a href="https://t.me/wechaty"> Telegram </a><br><a href="https://twitter.com/chatieio"> Twitter </a><br><a href="https://bit.ly/3aoLE86"> YouTube </a><br><a href="https://opencollective.com/wechaty"> Open Collective </a><br><a href="https://bit.ly/33Dfkuf"> Google Drive </a><br><a href="https://photos.app.goo.gl/LkmYMWypGoJdyvEJ6"> Photo Album </a><br><a href="https://bit.ly/2zpi2XG"> Meeting Notes </a><br><a href="https://bit.ly/2J6ziXa"> Hall of Fame </a><br></p></div><div id="footerThirdColumn"><div id="footerColumnEmphasisFirst"><p id="footerColumnEmphasis"> More </p></div><p id="footerColumnThree"><a href="https://wechaty.js.org/blog/"> Blog </a><br><a href="http://www.bot5.ml/blogs/chatbot-0-1/"> Book </a><br><a href="https://wechaty.js.org/docs/marketing/branding/"> Branding </a><br><a href="press"> Press </a><br><a href="https://github.com/wechaty/wechaty#readme"> GitHub </a><br><a href="https://chatie.statuspage.io/"> Status </a><br></p></div><div id="scannerWrapper"><img alt="Wechaty QR Scanner" id="scanner" src="/img/wechatyqrcode.webp"><strong id="footerColumnEmphasis">Join our WeChat Room<br></strong><p id="scannerText">You are welcome to join our Wechaty Developers&#x27; Home by scanning the above QR code, then send the secret code &quot;wechaty&quot; to Friday.BOT.</p></div></div><div id="wechatyLogoFooter"><img alt="Wechaty Logo" src="/img/wechatylogofooter.webp"></div><p id="codeOfConductText"><a> Code of Conduct </a></p><p id="copyrightText">Copyright © 2016-2021 Wechaty Contributors</p></footer></main></div>
<script src="/assets/js/runtime~main.88781fee.js"></script>
<script src="/assets/js/main.eecbffd6.js"></script>
</body>
</html>